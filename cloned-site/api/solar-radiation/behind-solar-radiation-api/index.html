<!DOCTYPE html><html lang="en"><head>
  <title> Solar Irradiance technology - OpenWeatherMap</title>
  <meta name="apple-itunes-app" content="app-id=1535923697">
  <!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-31TSX35RJT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-31TSX35RJT');
</script>
  <script type="text/javascript">
  (function (c, l, a, r, i, t, y) {
    c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
    t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
    y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
  })(window, document, "clarity", "script", "niyw44l6sh");
</script>  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="keywords" content="weather, world, Openstreetmap, forecast, Openweather, current">
<meta name="description" content="Discover the details behind our Solar Irradiance &amp; Energy Prediction service. Access accurate solar data,
including DNI, DHI, GHI, for both Clear and Cloudy Sky models using our products :
https://openweathermap.org/api/solar-energy-prediction and
https://openweathermap.org/api/solar-panels-and-energy-prediction">
<meta name="author" content="OpenWeatherMap.org">
<meta name="domain" content="OpenWeatherMap.org">
<meta name="p:domain_verify" content="34fe229eab8562dca90f4a5962ff80a9">
<meta property="title" content="Solar Irradiance technology">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">  <link rel="shortcut icon" href="/themes/openweathermap/assets/vendor/owm/img/icons/favicon.ico">
<link rel="icon" href="/themes/openweathermap/assets/vendor/owm/img/icons/logo_16x16.png" sizes="16x16" type="image/png">
<link rel="icon" href="/themes/openweathermap/assets/vendor/owm/img/icons/logo_32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/themes/openweathermap/assets/vendor/owm/img/icons/logo_60x60.png" sizes="60x60" type="image/png">  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald:400,700,300">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700,500,400italic,500italic">  <link rel="stylesheet" href="..\..\..\assets\plugins\offline\gdpr\assets\cookieBanner\banner.css">
  <link href="..\..\..\assets\combine\f715fd89ab078cb9d62b06cf2ebe66e0-1741279879" rel="stylesheet">
<!-- <link href="https://openweathermap.org/combine/9e05934b20b1168fe3f391e409e227a4-1741279879" rel="stylesheet"> -->
<!-- <link href="/themes/openweathermap/assets/css/new_design.css" rel="stylesheet"> -->  <script src="..\..\..\assets\combine\d8fb6d080cb70d894318fcae14526239-1741279879"></script>
<!-- <script src="https://openweathermap.org/combine/9dc69b9a99b742c8cd4a003c67dfede2-1741279879"></script> -->  </head>

<body class="body-orange" onclick="closePopUps()">
  <link href="..\..\..\assets\themes\openweathermap\assets\css\smart_banner_android.css" rel="stylesheet">

<div id="banner_android" class="banner_stripe">
    <div class="banner_container">
        <a class="smartbanner__exit" onclick="bannerClose()"></a>
        <img src="..\..\..\assets\themes\openweathermap\assets\img\mobile_app\android-app-top-banner.png" class="banner_icon" alt="banner android">
        <div>
            <p class="smartbanner-text">OpenWeather</p>
            <p class="smartbanner-text">OpenWeather Ltd.</p>
            <p class="smartbanner-text">GET - on Google Play</p>
        </div>
    </div>
    <a class="google_button" href="https://play.google.com/store/apps/details?id=uk.co.openweather">VIEW</a>
</div>

<script src="..\..\..\assets\themes\openweathermap\assets\js\smart_banner_android.js"></script>  <nav id="nav-website" onclick="toggleMenu(event)">
  <ul id="first-level-nav">
    <li class="logo">
      <a href="/">
        <img src="..\..\..\assets\themes\openweathermap\assets\img\logo_white_cropped.png" alt="logo">
      </a>
    </li>
    <li id="hamburger">
      <img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\icon_hamburger.svg" alt="icon hamburger">
    </li>
    <li id="desktop-menu">
      <form role="search" action="/find" method="get">
        <input type="text" name="q" placeholder="Weather in your city">
        <input type="submit" class="submit">
      </form>
      <ul>
        <li>
          <a href="/guide">Guide</a>
        </li>
        <li>
          <a href="/api">API</a>
        </li>
        <li>
          <a href="https://dashboard.openweather.co.uk/" target="_blank">Dashboard</a>
        </li>
        <li>
          <a href="https://home.openweathermap.org/marketplace" target="_blank">Marketplace</a>
        </li>
        <li>
          <a href="/price">Pricing</a>
        </li>
        <li>
          <a href="/weathermap">Maps</a>
        </li>
        <li>
          <a href="/our-initiatives">Our Initiatives</a>
        </li>
        <li>
          <a href="/examples">Partners</a>
        </li>
        <li>
          <a href="https://openweather.co.uk/blog/category/weather" target="_blank">Blog</a>
        </li>
        <li>
          <a href="https://openweather.co.uk" class="marketplace" target="_blank">For Business</a>
        </li>
                <li class="user-li"><a href="https://openweathermap.org/home/sign_in">Sign in</a></li>
                <li><a href="/support-centre">Support centre</a></li>
    
  </ul>
  </li>
  </ul>
  <ul id="mobile-menu">
    <li>
      <form role="search" action="/find" method="get">
        <input type="text" name="q" placeholder="Weather in your city">
        <input type="submit" class="submit">
      </form>
    </li>
    <li>
      <a href="/guide">Guide</a>
    </li>
    <li>
      <a href="/api">API</a>
    </li>
    <li>
      <a href="https://dashboard.openweather.co.uk/" target="_blank">Dashboard</a>
    </li>
    <li>
      <a href="https://home.openweathermap.org/marketplace" target="_blank">Marketplace</a>
    </li>
    <li>
      <a href="/price">Pricing</a>
    </li>
    <li>
      <a href="/weathermap">Maps</a>
    </li>
    <li>
      <a href="/our-initiatives">Our Initiatives</a>
    </li>
    <li>
      <a href="/examples">Partners</a>
    </li>
    <li>
      <a href="https://openweather.co.uk/blog/category/weather" target="_blank">Blog</a>
    </li>
    <li>
      <a href="https://openweather.co.uk" class="marketplace" target="_blank">For Business</a>
    </li>
    <li><a href="/support-centre">Support centre</a></li>
        <li><a href="https://openweathermap.org/home/sign_in">Sign in</a></li>
      </ul>
</nav>
<div class="nav-styles"></div>  <main class="wrapper">
        <div class="topic">
    <div class="container">
        <div class="row">
            <div class="col-sm-7">
                                    <h1 class="breadcrumb-title">Solar Irradiance technology</h1>
                            </div>
            <div class="col-sm-5">
                <ol class="breadcrumb pull-right hidden-xs">
                    <li><a href="/">Home</a></li>
                                            <li class="active"><a href="/api/solar-energy-prediction">Solar Irradiance API</a></li>
                                                            
                                                                        <li class="breadcrumb__leaf">Solar Irradiance technology</li>
                                                            </ol>
            </div>
        </div>
    </div>   
</div>        <div class="container documentation">
  <div class="doc-container">
    <div>
      <nav>
        <ul>
          <li><a href="#introduction">Introduction to Solar Irradiance technology</a></li>
          <li><a href="#clearsky">OpenWeather Clear Sky model</a></li>
          <li><a href="#cloudysky">OpenWeather Cloudy Sky model</a></li>
          <li><a href="#reference">Reference data for solar radiation model experiments</a></li>
          <li><a href="/api/solar-energy-prediction">Technical documentation of Solar Irradiance API</a></li>

        </ul>
      </nav>
    </div>


    <div>
      <section id="introduction">
        <h2>Introduction</h2>
        <p>Considering the importance of ecology and the search for renewable energy sources in the modern world, our
          company has decided to make a contribution to this cause. We wanted to give all our users an opportunity to
          get valuable data easily, regardless of the size of their projects. </p>

        <p>Although <a href="/api/solar-energy-prediction">Solar Irradiance </a> &amp; <a href="/api/solar-panels-and-energy-prediction">Energy Prediction </a> service was created on the basis of a
          large number of scientific articles, algorithms, models and data sources, we wanted, as always, to ensure that
          our final product is as versatile and easy to use as possible. </p>
        <p>The basic definitions of solar power sector are solar irradiation and solar irradiance and are often used
          interchangeably. However, they are not a synonyms:</p>
        <ul>
          <li><b>Solar irradiation</b> is the total energy received by a surface of the Earth per unit area over a given
            period
            of time. It is the amount of radiation (also known as shortwave radiation) passing through a horizontal
            plane. Solar irradiance is measured in Wh/m<sup>2</sup>.</li>
          <li><b>Solar irradiance</b> is the surface power density received by a surface of the Earth. Solar irradiance
            is
            measured in W/m<sup>2</sup>. </li>
        </ul>
        <p> To convert irradiance to irradiation please use the formula below:</p>
        <p><b>Energy(Wh/m<sup>2</sup>) = Power(W/m<sup>2</sup>) * TimeInterval(h)</b></p>
        <p>where energy is a solar irradiation; power is a solar irradiance.</p>
        <p>For energy data values for 1 h period of time timeinterval =1</p>
        <p>For energy data values for 15 min period of time timeinterval =0.25</p>
        <p>At the first stage of product development, we have selected the most common indices for solar irradiation
          measurements: DNI, DHI and GHI. We provide each of them for the Clear Sky and Cloudy Sky models:</p>
        <ul>

          <li><b>Direct Normal Irradiation (DNI)</b> is the amount of solar irradiation received per unit area by a
            surface that is always held perpendicular (or normal) to the rays that come in a straight line from the sun
            at its current position in the sky. Typically, you can maximise the amount of irradiation that a surface
            receives annually by keeping it normal to incoming irradiation. This quantity is of particular interest to
            concentrating solar thermal installations and installations that track the position of the sun.</li>
          <li><b>Diffuse Horizontal Irradiation (DHI)</b> is the amount of irradiation received per unit area by a
            surface (not subject to any shade or shadow) that does not arrive on a direct path from the sun, but has
            been scattered by molecules and particles in the atmosphere and comes equally from all directions.</li>
          <li><b>Global Horizontal Irradiation (GHI)</b> is the total amount of short-wave radiation received from above
            by a surface horizontal to the ground. This value is of particular interest to photovoltaic installations,
            and includes both DNI and DHI.</li>

        </ul>

        <p>To calculate these indices, we use the most accurate algorithms available, such as Simplified Solis for Clear
          Sky and DirInt for Cloudy Sky.</p>

        <p>Nevertheless, when we employed these algorithms in their original form, we obtained results of unsatisfactory
          accuracy (<a href="#reference">here</a> are the materials that we used as reference data). So that we could
          deliver a great product, we did a lot of additional work on further refining the algorithms to get more
          accurate output. Below are descriptions of the data in the OpenWeather algorithms.</p>
      </section>

      <section id="clearsky">
        <h2>OpenWeather Clear Sky model</h2>

        <p>Based on the Simplified Solis algorithm, we have developed our own algorithm called the OpenWeather Clear Sky
          model. In comparison with the standard input data for the Simplified Solis algorithm, we have enriched the set
          of input data to our algorithm. </p>

        <p>As a result, the following input data is used in the OpenWeather Clear Sky model:</p>
        <ul>
          <li>Date and time</li>
          <li>Geographical coordinates</li>
          <li>Sunrise and sunset times</li>
          <li>Height above sea level</li>
          <li>Ground pressure</li>
          <li>Air temperature on the surface</li>
          <li>Solar zenith angle. </li>
        </ul>

        <p>Here are our proprietary improvements to the original algorithm. </p>

        <p>We send date and time data to the algorithm with a shift of half of a time cycle. According to the 1-hour
          step of solar radiation forecast data, we shift the date and time half an hour backward for hourly data. This
          was implemented in order to better consider the position of the sun. When we use the data for the middle of an
          hour, the model works with values of sun position that are close to the average value of the period, which
          gives a more accurate result than the values at the beginning or end of the period.</p>

        <p>Besides this, we correct the calculation of the sun angles, and transfer them to the OpenWeather Clear Sky
          algorithm by using the sunrise and sunset times within the algorithm. This is needed in order to minimise the
          anomalous values of the calculated radiation when the altitude angle of the sun approaches 0 degrees during
          sunrise and sunset (when the angle approaches these values, the radiation values do not increase adequately,
          becoming unrealistic).</p>

        <p>Based on the results of the OpenWeather Clear Sky algorithm, we obtain three parameters: DNI Clear Sky, DHI
          Clear Sky and GHI Clear Sky.</p>
        <p>The Simplified Solis algorithm description, which is part of the ‘pvlib’ library, can be found <a href="https://github.com/pvlib/pvlib-python/blob/709daa6f8feddb50ae50b1da13f5f720d8ebb78f/pvlib/clearsky.py#L406" target="_blank">here</a>. </p>

      </section>
      <section id="cloudysky">
        <h2>OpenWeather Cloudy Sky model</h2>
        <p>We have also developed the OpenWeather Cloudy Sky model for the calculation of cloudy sky solar radiation
          data, by improving and correcting the DirInt algorithm. For instance, we have derived the formula for
          cloudiness correction, which is one of the most important elements of calculating cloudy sky solar radiation
          data.</p>

        <p>Basically, all OpenWeather products provide the cloudiness data as a percentage, but our correction is
          allowed to get the new cloudiness correction coefficient. It means that we convert the percentage values
          (which show how cloudy the area is) to the exact coefficient of cloud transmittance (which can be multiplied
          by the radiation value to get its real value).</p>

        <p>For example, if we have a high percentage of cloudiness, this means that the radiation in this place will be
          weak due to the clouds. As the next step, we calculate the correction factor of cloudiness to get cloud
          transmittance. After that, we multiply the radiation value by this coefficient and get the final version for
          solar radiation.</p>

        <p>If we have no clouds, which means the radiation will be strong, the cloudiness correction coefficient has no
          effect on the solar radiation level.</p>
        <p>Finally, we have the following input data for OpenWeather Cloudy Sky:</p>
        <ul>
          <li>GHI index from OpenWeather Clear Sky model results</li>
          <li>Dew point</li>
          <li>Cloudiness</li>
          <li>Date and time</li>
          <li>Geographical coordinates </li>
          <li>Height above sea level</li>
          <li>Ground pressure</li>
          <li>Air temperature on the surface</li>
          <li>Solar zenith angle.</li>
        </ul>
        <p>As before, most of the input data is taken from the <a href="/api">OpenWeather datasets and products</a>.
          As a result of the OpenWeather Cloudy Sky algorithm, we have three parameters: DNI Cloudy Sky, DHI Cloudy Sky
          and GHI Cloudy Sky.</p>
        <p>The DirInt algorithm description can be found <a href="https://github.com/pvlib/pvlib-python/blob/709daa6f8feddb50ae50b1da13f5f720d8ebb78f/pvlib/irradiance.py#L1277" target="_blank">here</a>.</p>

        <img width="630" height="360" src="..\..\..\assets\themes\openweathermap\assets\img\solarradiation.png" alt="solar radiation">

      </section>
      <section id="reference">
        <h2>Reference data for solar radiation model experiments</h2>
        <p>We conducted training and corrected our models by using reference data. As a result, we managed to achieve a
          sufficiently high accuracy from the product. As reference data, we used data from the ECMWF meteorological
          agency and the Copernicus programme (the European Union’s Earth Observation Programme). Thus we not only took
          data from weather models but also measured historical data from sensors. We used ERA5 as a weather model
          source and the CAMS programme data as a sensor’s real data. The ERA5 model has a resolution of 0.36 degrees
          and contains only historical data with a one-week delay. You can learn more about ERA5 <a href="https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation" target="_blank">here</a>.</p>

        <p>More information on data from the CAMS programme can be found <a href="https://atmosphere.copernicus.eu/solar-radiation" target="_blank">here</a>.</p>

        <p>Most of the input data to the OpenWeather Cloudy Sky and Clear Sky models is taken from the <a href="/api">OpenWeather datasets and products</a>. </p>
        <br>
        <br>
        <p>Please let us know if you have any questions about the Solar Irradiance API, and our <a href="mailto:info@openweathermap.org">technical support team</a> will be happy to help you.</p>

      </section>


    </div>
  </div>
</div>  </main>
  <div id="footer-website" onclick="toggleFooterSection(event)">
   <div class="inner-footer-container">
      <div class="horizontal-section">
         <div class="footer-section">
            <p class="section-heading">Product Collections</p>
            <div class="section-content">
               <ul>
                  <li><a href="/api#current">Current and Forecast APIs</a></li>
                  <li><a href="/api#history">Historical Weather Data</a></li>
                  <li><a href="/api#maps">Weather Maps</a></li>
                  <li><a href="https://dashboard.openweather.co.uk/" target="_blank">Weather Dashboard</a></li>
                  <li><a href="/widgets-constructor">Widgets</a></li>
               </ul>
            </div>
         </div>
         <div class="footer-section">
            <p class="section-heading">Subscription</p>
            <div class="section-content">
               <ul>
                  <li><a href="/appid">How to start</a></li>
                  <li><a href="/price">Pricing</a></li>
                  <li><a href="https://home.openweathermap.org/users/sign_up">Subscribe for free</a></li>
                  <li><a href="/faq">FAQ</a></li>
               </ul>
            </div>
         </div>
         <div class="footer-section">
            <p class="section-heading">Company</p>
            <div class="section-content">
               <p>OpenWeather is a team of IT experts and data scientists that has been practising deep weather data
                  science. For each point on the globe, OpenWeather provides historical, current and forecasted weather
                  data via light-speed APIs. Headquarters in London, UK.</p>
            </div>
         </div>
      </div>
      <div class="horizontal-section">
         <div class="footer-section">
            <p class="section-heading">Technologies</p>
            <div class="section-content">
               <ul>
                  <li><a href="/technology">Our technology</a></li>
                  <li><a href="/accuracy-and-quality">Accuracy and quality of weather data</a></li>
                  <li><a href="/stations">Connect your weather station</a></li>
               </ul>
            </div>
         </div>
         <div class="footer-section">
            <p class="section-heading">Terms &amp; Conditions</p>
            <div class="section-content">
               <ul>
                  <li><a href="https://openweather.co.uk/storage/app/media/Terms/Openweather_terms_and_conditions_of_sale.pdf" target="_blank">Terms and conditions of sale</a></li>
                  <li><a href="https://openweather.co.uk/privacy-policy" target="_blank">Privacy Policy</a></li>
                  <li><a href="https://openweather.co.uk/storage/app/media/Terms/Openweather_website_terms_and_conditions_of_use.pdf" target="_blank">Website terms and conditions</a></li>
               </ul>
            </div>
         </div>
         <div class="footer-section not-foldable">
            <!-- <p class="section-heading">Contact us</p> -->
            <div class="section-content">
               <ul>
                  <li><a href="/about-us" target="_blank">About us</a></li>
                  <li><a href="https://openweather.co.uk/about/our-offices" target="_blank">Our offices</a></li>
                  <li><a href="https://openweather.co.uk/blog/category/weather" target="_blank">Blog</a></li>
                  <li><a href="https://openweather.co.uk/" target="_blank">OpenWeather for Business</a></li>
                  <li><a href="/chat">Ulla, OpenWeather AI assistant</a></li>
                  <li><a href="https://home.openweathermap.org/questions" target="_blank">Ask a question</a></li>
                  <!--  <li><a href="mailto:info@openweathermap.org">info@openweathermap.org</a>  -->
               </ul>
            </div>
         </div>
      </div>
      <div class="horizontal-section">
         <div class="footer-section">
            <div class="my-5">
               <p>Download OpenWeather app</p>
               <div>
                  <a href="https://apps.apple.com/gb/app/openweather/id1535923697" target="_blank">
                     <img src="..\..\..\assets\themes\openweathermap\assets\img\mobile_app\app-store-badge.svg" alt="Get it on AppStore">
                  </a>
                  <a href="https://play.google.com/store/apps/details?id=uk.co.openweather" target="_blank">
                     <img src="..\..\..\assets\themes\openweathermap\assets\img\mobile_app\google-play-badge.png" class="google-play-img" alt="Get it on Google Play">
                  </a>
               </div>
            </div>
         </div>
         <div class="footer-section">
            <div class="my-5 logo-blocks">
               <img src="..\..\..\assets\themes\openweathermap\assets\img\RMets_Logo_corp.png" width="200" height="70" alt="RMets logo">
               <img src="..\..\..\assets\themes\openweathermap\assets\img\CNB_Business_Logo_2024.png" alt="CNB Business logo" width="170" height="170">
            </div>
         </div>

      </div>
      <div class="horizontal-section my-5">
         <div>
            <span>Supplier of Achilles UVDB community</span><br>
            <span id="years-copyright"></span><br><br>
         </div>
         <div class="social">
            <a href="https://www.facebook.com/groups/270748973021342" target="_blank"><img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\icon_facebook.png" alt="facebook icon"></a>
            <a href="https://twitter.com/OpenWeatherMap" target="_blank"><img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\icon_x_black.png" alt="x icon"></a>
            <a href="https://www.linkedin.com/company/9816754" target="_blank"><img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\icon_linkedin.png" alt="linkedin icon "></a>
            <a href="https://medium.com/@openweathermap" target="_blank"><img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\new_medium.svg" alt="meduim icon"></a>
            <a href="https://t.me/openweathermap" target="_blank"><img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\icon_telegram.png" alt="telegram icon"></a>
            <a href="https://github.com/openweathermap" target="_blank"><img src="..\..\..\assets\themes\openweathermap\assets\img\owm_icons\icon_github.png" alt="github icon"></a>
         </div>
      </div>
      <div class="horizontal-section"></div>
   </div>
</div>  <script src="https://cdn.ravenjs.com/3.6.1/raven.min.js"></script>
<script>Raven.config('http://66df88eb63e94f27964b84031e49b358@sentry.owm.io/16').install()</script>  <script src="..\..\..\assets\themes\openweathermap\assets\js\bundle_owm_postload.c31872127471c475ade1.js"></script>
<script src="..\..\..\assets\themes\openweathermap\assets\js\advertising.js"></script>      <div class="gdpr-banner">
        <div class="gdpr-banner__wrapper">
            <div class="gdpr-banner__column gdpr-banner__column--1">
    <div class="gdpr-banner__row">
        <div class="gdpr-banner__message">
    We use cookies to personalize content and to analyze our traffic. Please decide if you are willing to accept cookies from our website.
</div>    </div>
</div>
<div class="gdpr-banner__column gdpr-banner__column--2">
        <div class="gdpr-banner__settings">
        <a role="link" rel="privacy" href="https://openweathermap.org/cookies" data-request="onDecline" data-request-success="document.location.href = 'https://openweathermap.org/cookies'">
            Advanced Settings
        </a>
    </div>
    <div class="gdpr-banner__opt-out">
    <button role="button" tabindex="0" aria-pressed="false" class="gdpr-banner__button gdpr-banner__button--opt-out" data-request="onDecline" data-request-success="document.querySelector('.gdpr-banner').remove()">
        Decline
    </button>
</div>    <div class="gdpr-banner__opt-in">
    <button role="button" tabindex="0" aria-pressed="false" class="gdpr-banner__button gdpr-banner__button--opt-in" data-request="onAccept" data-request-success="document.querySelector('.gdpr-banner').remove()" data-request-update="'gtag' : '#gdpr-reload'">
        Accept
    </button>
</div>
    <div class="gdpr-banner__dismiss">
    <button role="button" tabindex="0" aria-pressed="false" class="gdpr-banner__button--dismiss" onclick="document.querySelector('.gdpr-banner').remove()">×</button>
</div></div>        </div>
    </div>
  <link href="..\..\..\assets\themes\openweathermap\assets\css\chat-banner.css" rel="stylesheet">
<link href="..\..\..\assets\themes\openweathermap\assets\vendor\owm\css\assistant-index.DVVhxENO.css" rel="stylesheet">

<style>
  #owm-chat-bot p {
    font-weight: normal;
  }

  #owm-chat-bot>div {
    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1);
  }

  .pop-up-content h2 {
    margin-top: 19.2px;
  }

  .owm-chat-bot-description ul {
    margin: 0;
    padding: 16px;
    background-color: #4f4f4f;
    color: white;
    border-radius: 4.8px;
  }

  .owm-chat-bot-description ul.dashed {
    list-style-type: none;
  }

  /* .owm-chat-bot-description ul.dashed>li {
    text-indent: -1rem;
  } */

  .owm-chat-bot-description ul.dashed>li:before {
    content: "- ";
    text-indent: -16px;
  }
</style>

<div id="owm-chat-bot" data-key="5796abbde9106b7da4febfae8c44c232" data-popup="" style="display: none; position: fixed; z-index: 50000; bottom: 16px; right: 16px; height: 640px; max-height: calc(100% - 32px); width: 480px; max-width: calc(100% - 32px);">
</div>

<script>
  `ASSISTANT_URL=https://api.openweathermap.org`.split("\n").map(env => env.split('=')).map(env => window[env[0]] = env[1]);
</script>
<script src="..\..\..\assets\themes\openweathermap\assets\vendor\owm\js\assistant-index.ClVGaiQn.js"></script>

<div id="chat-banner" class="banner-pop-up">
  <div class="banner-pop-up-content">
    <img src="..\..\..\assets\themes\openweathermap\assets\img\Ulla_bot.png" alt="Ulla the Bot" width="16" height="16">
    <h3>Ulla Weather Assistant</h3>
  </div>
</div>


<script>
  const chatBanner = document.getElementById('chat-banner');
  const chatBot = document.getElementById('owm-chat-bot');

  chatBanner.addEventListener('click', () => {
    chatBanner.style.display = 'none';
    chatBot.style.display = chatBot.style.display === 'none' ? 'block' : 'none';
    gtag('event', 'maxullaweather', {
      'event_category': 'Chat',
      'event_label': 'maxullaweather'
    });
  });

  window.addEventListener('minimize', () => {
    chatBot.style.display = 'none';
    chatBanner.style.display = 'block';
    gtag('event', 'minullaweather', {
      'event_category': 'Chat',
      'event_label': 'minullaweather'
    });
  });

  const gdprBanner = document.querySelector('.gdpr-banner');

  if (gdprBanner) {
    chatBanner.style.bottom = '80px';

    const observer = new MutationObserver(() => {
      if (!document.body.contains(gdprBanner)) {
        chatBanner.style.bottom = '50px';
      } else {
        chatBanner.style.bottom = (gdprBanner.clientHeight + 8) + 'px';
      }
    });

    observer.observe(document.body, { childList: true, subtree: true });
  }
</script>

</body></html>