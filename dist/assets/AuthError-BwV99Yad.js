import{j as e,h as E,a2 as S,E as P}from"./auth-uUeJCO__.js";import{r as s,d as A,u as _,L as C}from"./vendor-DrPEMai6.js";const F=()=>{const[p,o]=s.useState(""),[f,t]=s.useState(""),[n,y]=s.useState(""),[d,u]=s.useState(!1),[m,g]=s.useState(""),a=A(),c=_();s.useEffect(()=>{(()=>{if(a.hash){const l=new URLSearchParams(a.hash.substring(1)),x=l.get("error"),k=l.get("error_code"),w=l.get("error_description");if(x){o(k||x),t(w||"An authentication error occurred");return}}const r=new URLSearchParams(a.search),h=r.get("error"),v=r.get("error_code"),N=r.get("error_description");h?(o(v||h),t(N||"An authentication error occurred")):(o("unknown"),t("An unknown authentication error occurred"))})()},[a]);const b=async i=>{if(i.preventDefault(),!n){t("Please enter your email address");return}u(!0),g("");try{const{error:r}=await P.auth.resend({type:"signup",email:n});if(r)throw r;g(`Verification email resent to ${n}. Please check your inbox and spam folder.`)}catch(r){console.error("Error resending verification email:",r),t(r.message||"Failed to resend verification email")}finally{u(!1)}},j=()=>{switch(p){case"otp_expired":case"expired_otp":return e.jsxs("div",{children:[e.jsx("p",{className:"mb-4",children:"Your verification link has expired. Please enter your email below to request a new link."}),e.jsxs("form",{onSubmit:b,className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(S,{className:"text-gray-400"})}),e.jsx("input",{id:"email",type:"email",value:n,onChange:i=>y(i.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",placeholder:"Enter your email"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors disabled:opacity-50",children:d?"Sending...":"Resend Verification Link"})]})]});case"access_denied":return e.jsxs("div",{children:[e.jsx("p",{className:"mb-4",children:"Access denied. You may not have permission to access this resource or your session has expired."}),e.jsx("button",{onClick:()=>c("/signin"),className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors mt-4",children:"Go to Sign In"})]});case"invalid_token":return e.jsxs("div",{children:[e.jsx("p",{className:"mb-4",children:"The authentication token is invalid or has expired."}),e.jsx("button",{onClick:()=>c("/signin"),className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors mt-4",children:"Go to Sign In"})]});default:return e.jsxs("div",{children:[e.jsx("p",{className:"mb-4",children:"An authentication error occurred. Please try signing in again or contact support if the problem persists."}),e.jsx("button",{onClick:()=>c("/signin"),className:"w-full bg-primary hover:bg-primary/90 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors mt-4",children:"Go to Sign In"})]})}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 shadow-md rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-red-100 dark:bg-red-900",children:e.jsx(E,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"mt-3 text-xl font-bold text-gray-900 dark:text-white",children:"Authentication Error"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:f})]}),m&&e.jsx("div",{className:"mb-6 p-4 bg-green-100 dark:bg-green-900 rounded-lg text-green-800 dark:text-green-200",children:m}),j(),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.jsx(C,{to:"/signin",className:"text-primary hover:underline",children:"Back to Sign In"})})})]})})};export{F as default};
//# sourceMappingURL=AuthError-BwV99Yad.js.map
