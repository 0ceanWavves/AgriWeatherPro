{"version":3,"file":"AuthRequired-GCIOX3Tw.js","sources":["../../src/pages/AuthRequired.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { FaLock, FaLeaf, FaSignInAlt, FaUserPlus, FaEnvelope } from 'react-icons/fa';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst AuthRequired = () => {\r\n  const { user, resendVerification } = useAuth();\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const location = useLocation();\r\n  \r\n  // Check if we have a state message (e.g., from redirection)\r\n  const message = location.state?.message || \"Authentication required to access this content.\";\r\n  const isEmailVerificationIssue = user && message.toLowerCase().includes('verify') && message.toLowerCase().includes('email');\r\n  \r\n  const handleResendVerification = async () => {\r\n    if (!user?.email) return;\r\n    \r\n    setLoading(true);\r\n    setSuccess(false);\r\n    setError(null);\r\n    \r\n    try {\r\n      const { error } = await resendVerification(user.email);\r\n      \r\n      if (error) throw error;\r\n      \r\n      setSuccess(true);\r\n    } catch (error) {\r\n      console.error('Error resending verification email:', error);\r\n      setError(error.message || 'Failed to resend verification email. Please try again later.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900\">\r\n      <div className=\"max-w-lg w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg text-center\">\r\n        <div className=\"mb-6\">\r\n          <div className=\"inline-block p-4 bg-yellow-100 dark:bg-yellow-900 rounded-full\">\r\n            <FaLock className=\"text-4xl text-yellow-500\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"mb-6\">\r\n          <FaLeaf className=\"text-6xl text-primary mx-auto mb-4\" />\r\n          <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-2\">\r\n            {isEmailVerificationIssue ? 'Email Verification Required' : 'Authentication Required'}\r\n          </h2>\r\n          <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\r\n            {message}\r\n          </p>\r\n          \r\n          {isEmailVerificationIssue && (\r\n            <div className=\"mt-6 mb-6\">\r\n              {success ? (\r\n                <div className=\"p-4 bg-green-100 dark:bg-green-900 rounded-lg text-green-800 dark:text-green-200 mb-4\">\r\n                  Verification email sent! Please check your inbox and spam folder.\r\n                </div>\r\n              ) : error ? (\r\n                <div className=\"p-4 bg-red-100 dark:bg-red-900 rounded-lg text-red-800 dark:text-red-200 mb-4\">\r\n                  {error}\r\n                </div>\r\n              ) : null}\r\n              \r\n              <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\r\n                We've sent a verification link to <strong>{user?.email}</strong>. \r\n                If you didn't receive it, click below to resend the email.\r\n              </p>\r\n              \r\n              <button\r\n                onClick={handleResendVerification}\r\n                disabled={loading || success}\r\n                className=\"flex items-center justify-center gap-2 mx-auto bg-primary hover:bg-primary/90 text-white font-bold py-3 px-6 rounded-lg transition-colors disabled:opacity-50\"\r\n              >\r\n                <FaEnvelope />\r\n                {loading ? 'Sending...' : success ? 'Email Sent' : 'Resend Verification Email'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {!user && (\r\n          <div className=\"flex flex-col md:flex-row gap-4 justify-center\">\r\n            <Link \r\n              to=\"/signin\" \r\n              className=\"flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white font-bold py-3 px-6 rounded-lg transition-colors\"\r\n            >\r\n              <FaSignInAlt />\r\n              Sign In\r\n            </Link>\r\n            <Link \r\n              to=\"/signup\" \r\n              className=\"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-primary border-2 border-primary font-bold py-3 px-6 rounded-lg transition-colors dark:bg-transparent dark:hover:bg-gray-700\"\r\n            >\r\n              <FaUserPlus />\r\n              Create Account\r\n            </Link>\r\n          </div>\r\n        )}\r\n        \r\n        {!isEmailVerificationIssue && (\r\n          <div className=\"mt-8\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white mb-4\">\r\n              Why Create an Account?\r\n            </h3>\r\n            <ul className=\"text-left space-y-2 text-gray-600 dark:text-gray-300\">\r\n              <li className=\"flex items-start\">\r\n                <span className=\"text-green-500 mr-2\">✓</span>\r\n                Access personalized weather forecasts for your specific locations\r\n              </li>\r\n              <li className=\"flex items-start\">\r\n                <span className=\"text-green-500 mr-2\">✓</span>\r\n                Save and track crop yield predictions for different crops\r\n              </li>\r\n              <li className=\"flex items-start\">\r\n                <span className=\"text-green-500 mr-2\">✓</span>\r\n                Receive customized alerts and notifications for weather events\r\n              </li>\r\n              <li className=\"flex items-start\">\r\n                <span className=\"text-green-500 mr-2\">✓</span>\r\n                Track historical weather data and view agricultural insights\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthRequired;"],"names":["AuthRequired","user","resendVerification","useAuth","loading","setLoading","useState","success","setSuccess","error","setError","message","_a","useLocation","isEmailVerificationIssue","handleResendVerification","jsxs","jsx","FaLock","FaLeaf","FaEnvelope","Link","FaSignInAlt","FaUserPlus"],"mappings":"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"}